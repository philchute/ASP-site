@page
@model ASP_site.Pages.Links.IndexModel

@{
    ViewData["Title"] = "Links List";
}

<div class="jumbotron p-2 d-flex justify-content-between">
    <h2 class="mr-auto display-3">Links List</h2>
    <form class="d-flex">
        <div class="form-group ps-2">
            <label class="col-form-label" asp-for="SelectedTopic" class="control-label">Topic:</label>
            <select class="form-control" asp-for="SelectedTopic" asp-items="Model.Topics" onchange="this.form.submit();">
                <option value="">All</option>
            </select>
        </div>
        <div class="form-group ps-2">
            <label class="col-form-label" asp-for="SelectedLinkType" class="control-label">Type:</label>
            <select class="form-control" asp-for="SelectedLinkType" asp-items="Model.LinkTypes" onchange="this.form.submit();">
                <option value="">All</option>
            </select>
        </div>
        <div class="form-group ps-2">
            <label class="col-form-label" asp-for="SearchString" class="control-label">Search:</label>
            <input class="form-control" type="text" asp-for="SearchString" />
            <input class="form-control" type="submit" value="Search" class="btn btn-primary btn-sm mr-auto" />
        </div>
        <div class="form-group ps-2">
            <label class="col-form-label" asp-for="SortField" class="control-label">Sort by:</label>
            <select class="form-control" asp-for="SortField" onchange="this.form.submit();">
                <option value="Topic">Topic</option>
                <option value="Type">Type</option>
                <option value="Label">Label</option>
                <option value="Description">Description</option>
            </select>
        </div>
    </form>
</div>

<section class="grid">
    <div class="row bg-dark text-white fw-bold g-0">
        <div class="p-1 col-sm-2 text-center">Topic</div>
        <div class="p-1 col-sm-1 text-center">Type</div>
        <div class="p-1 col-sm-4">Label <i>(@(Model.DisplayLinks?.Count ?? 0) shown)</i></div>
        <div class="p-1 col-sm-5">Description</div>
    </div>

    @if(Model.DisplayLinks != null) {
        @foreach (var link in Model.DisplayLinks) {
            <div class="row g-0 border-bottom">
                <div class="p-1 col-sm-2 text-center">
                    @if(!string.IsNullOrEmpty(link.TopicUrl)) {
                        <a href="@link.TopicUrl">@link.Topic</a>
                    } else if (!string.IsNullOrEmpty(link.Topic)) {
                        @link.Topic
                    }
                    else {
                        <span>-</span>
                    }
                </div>
                <div class="p-1 col-sm-1 text-center">@link.LinkType</div>
                <div class="p-1 col-sm-4 text-white">
                    <a class="text-decoration-none text-reset" href="@link.Url" target="_blank">
                        @(link.Label ?? "-")
                    </a>
                </div>
                <div class="p-1 col-sm-5">
                     <a class="text-decoration-none text-reset" href="@link.Url" target="_blank">
                        @(link.Description ?? "-")
                    </a>
                </div>
            </div>
        }
    }
</section> 